# ğŸ³ Base image nháº¹ & á»•n Ä‘á»‹nh
FROM node:18

# ğŸ“ ThÆ° má»¥c lÃ m viá»‡c
WORKDIR /app

# ğŸ“¦ CÃ i package trÆ°á»›c (Ä‘á»ƒ cache tá»‘t)
COPY package*.json ./
RUN npm install

# ğŸ“¦ Copy mÃ£ nguá»“n worker (náº¿u cáº§n báº¡n cÃ³ thá»ƒ tÃ¡ch riÃªng thÆ° má»¥c worker/)
COPY . .

# ğŸ›  Build TypeScript (dÃ¹ng riÃªng config náº¿u cáº§n)
RUN npx tsc -p tsconfig.worker.json

# ğŸš€ Cháº¡y file delete-merged-worker sau build
CMD ["node", "dist/worker/delete-merged-worker.js"]
