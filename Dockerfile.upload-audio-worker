# ğŸ³ Base image á»•n Ä‘á»‹nh
FROM node:20

# ğŸ“ ThÆ° má»¥c lÃ m viá»‡c
WORKDIR /app

# ğŸ“¦ CÃ i thÆ° viá»‡n Node.js
COPY package.json package-lock.json ./
RUN npm install

# ğŸ“¦ Copy toÃ n bá»™ mÃ£ nguá»“n & build
COPY . .
RUN npx tsc -p tsconfig.worker.json

# ğŸŒ Má»Ÿ port 8080 cho Express
EXPOSE 8080
ENV PORT=8080

# ğŸš€ Cháº¡y upload-audio-worker
CMD ["node", "dist/worker/upload-audio-worker.js"]
